var taskr=angular.module("taskr",["ngRoute"]);taskr.config(["$routeProvider",function(t){t.when("/",{templateUrl:"views/index.html",controller:"indexCtrl"}).when("/:companyId",{templateUrl:"views/tasks.html",controller:"taskCtrl"}).otherwise(function(t){t.path("/")})}]),taskr.controller("appbarCtrl",function(t){t.exit=function(){window.close()}}),taskr.controller("companiesCtrl",function(t){t.companies=db.query("companies"),t.show_add=function(){document.getElementById("add_company").setAttribute("class","show")},t.hide_add=function(){document.getElementById("add_company").setAttribute("class","")},t.add=function(){}}),taskr.controller("indexCtrl",function(){}),taskr.controller("taskCtrl",function(t,e,n){t.company=db.query("companies",{ID:n.companyId})[0],t.tasks=db.query("tasks",{company:n.companyId});for(var o=0;o<t.tasks.length;o++)t.tasks[o].entries=db.query("entries",{task:t.tasks[o].ID});t.time_spent=function(t,e){var n=new Date(t.started_at),o=new Date(t.ended_at),r=(o-n)/1e3/60;return r="minutes"==e?r:r/60,Math.round(r)},t.total_time=function(e){var n=db.query("entries",{task:e.ID}),r=0;for(o=0;o<n.length;o++)r+=t.time_spent(n[o],"hours");return r},t.add=function(){db.insert("tasks",{company:n.companyId,title:t.title,description:t.description,complete:!1}),db.commit(),t.tasks.push({title:t.title,description:t.description,complete:!1})}});